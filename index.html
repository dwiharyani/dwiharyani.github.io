<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Yaumul Milad Kak Ula üíõüíó (ME Edition)</title>
  <style>
    :root{
      --pink:#ff3ea5;
      --hotpink:#ff1f8f;
      --yellow:#ffe24a;
      --lemon:#fff2a6;
      --ink:#1a1633;
      --cream:#fff7df;
      --shadow: rgba(0,0,0,.18);
      --outline:#241b4a;
      --mint:#4dffcc;
      --blue:#4aa3ff;
      --steel:#cfd8e6;
      --steel2:#a9b6cc;
      --oil:#2b2b3a;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      color:var(--ink);
      background:
        radial-gradient(circle at 20% 20%, rgba(255,62,165,.22) 0 18%, transparent 19%),
        radial-gradient(circle at 80% 30%, rgba(255,226,74,.35) 0 16%, transparent 17%),
        radial-gradient(circle at 60% 85%, rgba(77,255,204,.20) 0 18%, transparent 19%),
        linear-gradient(135deg, #fff3a6 0%, #ffd34a 40%, #ff6bbf 100%);
      overflow:hidden;
    }
    body::before{
      content:"";
      position:fixed; inset:0;
      background: repeating-linear-gradient(
        to bottom,
        rgba(0,0,0,.04) 0px,
        rgba(0,0,0,.04) 2px,
        transparent 3px,
        transparent 6px
      );
      pointer-events:none;
      mix-blend-mode: multiply;
      opacity:.35;
    }

    canvas#fx{ position:fixed; inset:0; pointer-events:none; z-index:6; }

    .floaty{ position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:0; }
    .blob{
      position:absolute;
      width:120px; height:120px;
      border-radius:30px;
      filter: drop-shadow(0 12px 0 rgba(0,0,0,.10));
      opacity:.85;
      animation: drift 10s ease-in-out infinite;
      transform: rotate(10deg);
    }
    .blob.b1{ left:-20px; top:10%; background:linear-gradient(145deg,var(--pink),var(--yellow)); animation-duration:12s;}
    .blob.b2{ right:-30px; top:35%; width:160px; height:160px; background:linear-gradient(145deg,var(--yellow),var(--mint)); animation-duration:14s; transform: rotate(-8deg);}
    .blob.b3{ left:15%; bottom:-40px; width:180px; height:180px; background:linear-gradient(145deg,var(--blue),var(--hotpink)); animation-duration:16s; transform: rotate(14deg);}
    @keyframes drift{
      0%,100%{ transform: translateY(0) rotate(var(--r,10deg)); }
      50%{ transform: translateY(-18px) rotate(calc(var(--r,10deg) * -1)); }
    }

    .wrap{ width:min(1020px, 92vw); padding:22px; position:relative; z-index:2; }
    .card{
      background: rgba(255,247,223,.92);
      border:4px solid var(--outline);
      border-radius:22px;
      box-shadow: 0 16px 0 rgba(0,0,0,.12), 0 24px 40px var(--shadow);
      overflow:hidden;
      position:relative;
    }

    /* floating gears in corners */
    .gearCorner{
      position:absolute;
      width:120px; height:120px;
      opacity:.9;
      filter: drop-shadow(0 12px 0 rgba(0,0,0,.10));
      z-index:1;
      pointer-events:none;
    }
    .gearCorner.left{ left:-34px; top:72px; transform: rotate(0deg); }
    .gearCorner.right{ right:-46px; top:150px; transform: rotate(0deg) scale(.92); opacity:.75; }
    .spin{ animation: spin 6s linear infinite; transform-origin:center; }
    .spinFast{ animation: spin 1.6s linear infinite; transform-origin:center; }
    @keyframes spin{ to{ transform: rotate(360deg); } }

    .topbar{
      display:flex; align-items:center; gap:10px;
      padding:14px 16px;
      background: linear-gradient(90deg, var(--yellow), #fff7a8, var(--pink));
      border-bottom:4px solid var(--outline);
      position:relative;
      z-index:2;
    }
    .dots{display:flex; gap:8px; margin-right:6px;}
    .dot{
      width:14px; height:14px;
      border:3px solid var(--outline);
      border-radius:50%;
      background: #fff;
      box-shadow: 0 4px 0 rgba(0,0,0,.10);
    }
    .dot:nth-child(1){background:var(--pink)}
    .dot:nth-child(2){background:var(--yellow)}
    .dot:nth-child(3){background:var(--mint)}
    .title{
      font-weight:900; letter-spacing:.5px;
      font-size: clamp(18px, 2.3vw, 22px);
      text-shadow: 2px 2px 0 #fff, 4px 4px 0 rgba(0,0,0,.12);
      margin:0;
    }

    .content{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:18px;
      padding:18px;
      position:relative;
      z-index:2;
    }
    @media (max-width: 900px){ .content{ grid-template-columns:1fr; } }

    .panel{
      border:4px dashed rgba(36,27,74,.35);
      border-radius:18px;
      padding:16px;
      background: linear-gradient(180deg, rgba(255,255,255,.65), rgba(255,255,255,.20));
      position:relative;
      overflow:hidden;
    }

    .hero{
      display:grid;
      grid-template-columns: 1fr auto;
      gap:14px;
      align-items:center;
    }

    .big{
      margin:0;
      font-weight:900;
      font-size: clamp(28px, 4vw, 42px);
      line-height:1.05;
      letter-spacing:1px;
      color:var(--outline);
      text-shadow: 2px 2px 0 #fff, 4px 4px 0 rgba(0,0,0,.12);
    }
    .sub{ margin:8px 0 0; font-size: clamp(14px, 2vw, 16px); opacity:.92; }

    .banner{
      display:inline-block;
      margin-top:10px;
      padding:8px 12px;
      border:3px solid var(--outline);
      border-radius:14px;
      background: linear-gradient(90deg, var(--pink), var(--yellow));
      box-shadow: 0 10px 0 rgba(0,0,0,.10);
      font-weight:900;
    }

    /* cute character */
    .char{
      width:230px; aspect-ratio:1/1; position:relative;
      display:grid; place-items:center;
      filter: drop-shadow(0 14px 0 rgba(0,0,0,.12));
    }
    .char .body{
      width:170px; height:170px;
      border-radius: 28px;
      border:4px solid var(--outline);
      background:
        radial-gradient(circle at 35% 35%, rgba(255,255,255,.7) 0 22%, transparent 23%),
        linear-gradient(145deg, #fff7a8 0%, var(--yellow) 52%, #ffd0ef 100%);
      position:relative;
      box-shadow: inset 0 -10px 0 rgba(0,0,0,.06);
    }
    .ear{
      position:absolute;
      width:56px; height:56px;
      border:4px solid var(--outline);
      border-radius:18px;
      background: linear-gradient(145deg, #ffd0ef, var(--pink));
      top:-26px;
    }
    .ear.left{ left:18px; transform: rotate(-12deg);}
    .ear.right{ right:18px; transform: rotate(12deg);}

    /* Engineer Helmet + goggles */
    .helmet{
      position:absolute;
      top:-10px; left:50%;
      transform: translateX(-50%);
      width:150px; height:70px;
      border:4px solid var(--outline);
      border-bottom:none;
      border-radius: 80px 80px 40px 40px;
      background: linear-gradient(180deg, var(--yellow), #fff6b0);
      box-shadow: 0 10px 0 rgba(0,0,0,.08);
    }
    .helmet::after{
      content:"ME";
      position:absolute;
      left:50%; top:16px;
      transform: translateX(-50%);
      font-weight:900;
      padding:2px 10px;
      border:3px solid var(--outline);
      border-radius:12px;
      background:#fff;
      box-shadow: 0 6px 0 rgba(0,0,0,.08);
      font-size:14px;
    }
    .goggles{
      position:absolute;
      top:62px; left:50%;
      transform: translateX(-50%);
      display:flex; gap:10px;
      align-items:center;
    }
    .lens{
      width:46px; height:30px;
      border:4px solid var(--outline);
      border-radius:14px;
      background: linear-gradient(180deg, rgba(255,255,255,.9), rgba(77,255,204,.25));
      box-shadow: inset 0 -6px 0 rgba(0,0,0,.06);
      position:relative;
    }
    .bridge{
      width:16px; height:8px;
      border:4px solid var(--outline);
      border-left:none; border-right:none;
      border-radius:10px;
      background: transparent;
    }

    .face{ position:absolute; inset:0; display:grid; place-items:center; }
    .eyes{ display:flex; gap:18px; margin-top:30px; }
    .eye{
      width:18px; height:18px;
      border:4px solid var(--outline);
      border-radius:8px;
      background:#fff;
      position:relative;
    }
    .eye::after{
      content:"";
      position:absolute;
      width:8px; height:8px;
      border-radius:4px;
      background:var(--outline);
      left:4px; top:4px;
      animation: blink 5.2s infinite;
    }
    @keyframes blink{
      0%, 92%, 100%{ transform: scaleY(1); }
      95%{ transform: scaleY(.12); }
    }
    .mouth{
      width:44px; height:26px;
      border:4px solid var(--outline);
      border-top:none;
      border-radius:0 0 22px 22px;
      margin-top:14px;
      background: rgba(255,62,165,.12);
    }
    .cheek{ position:absolute; width:18px; height:10px; border-radius:10px; background: rgba(255,62,165,.35); top:104px; }
    .cheek.left{ left:34px;} .cheek.right{ right:34px;}

    .nameTag{
      position:absolute; bottom:-16px;
      padding:7px 12px;
      border:4px solid var(--outline);
      border-radius:14px;
      background: #fff;
      font-weight:900;
      box-shadow: 0 10px 0 rgba(0,0,0,.10);
    }

    /* cake */
    .cakeWrap{
      margin-top:12px;
      display:flex; gap:14px; flex-wrap:wrap;
      align-items:flex-end; justify-content:space-between;
    }
    .cake{
      width:min(420px, 100%);
      height:170px;
      position:relative;
      border:4px solid var(--outline);
      border-radius:18px;
      background:
        repeating-linear-gradient(45deg, rgba(255,62,165,.20) 0 10px, rgba(255,226,74,.24) 10px 20px);
      box-shadow: 0 14px 0 rgba(0,0,0,.10);
      overflow:hidden;
    }
    .cake::before{
      content:"";
      position:absolute; left:0; right:0; bottom:0;
      height:55%;
      background: linear-gradient(180deg, rgba(255,255,255,.55), rgba(255,255,255,.0));
    }
    .icing{ position:absolute; left:0; right:0; top:0; height:56px; background: linear-gradient(90deg, var(--pink), #ffc1e6, var(--yellow)); border-bottom:4px solid var(--outline); }
    .drip{
      position:absolute; top:42px; width:26px; height:40px;
      background: linear-gradient(180deg, #ffc1e6, rgba(255,193,230,.0));
      border-left:4px solid var(--outline);
      border-right:4px solid var(--outline);
      border-bottom:4px solid var(--outline);
      border-radius: 0 0 14px 14px;
      opacity:.9;
    }
    .drip:nth-child(2){ left:40px;}
    .drip:nth-child(3){ left:120px; height:46px;}
    .drip:nth-child(4){ left:210px; height:38px;}
    .drip:nth-child(5){ left:310px; height:50px;}

    .candles{
      position:absolute; top:-34px; left:50%;
      transform: translateX(-50%);
      display:flex; gap:14px;
    }
    .candle{
      width:16px; height:42px;
      border:4px solid var(--outline);
      border-radius:10px;
      background: linear-gradient(180deg, #fff, var(--yellow));
      position:relative;
      box-shadow: 0 8px 0 rgba(0,0,0,.10);
    }
    .candle:nth-child(2){ background: linear-gradient(180deg, #fff, #ffd0ef); }
    .candle:nth-child(3){ background: linear-gradient(180deg, #fff, var(--mint)); }
    .flame{
      position:absolute; top:-24px; left:50%;
      transform: translateX(-50%);
      width:18px; height:22px;
      border:4px solid var(--outline);
      border-radius: 50%;
      background: radial-gradient(circle at 45% 35%, #fff 0 22%, var(--yellow) 23% 60%, var(--hotpink) 61% 100%);
      animation: flicker .15s infinite alternate;
      transform-origin: bottom center;
    }
    @keyframes flicker{
      from{ transform: translateX(-50%) rotate(-3deg) scale(1.02); }
      to{ transform: translateX(-50%) rotate(3deg) scale(.98); }
    }
    .flame.off{ opacity:0; transform: translateX(-50%) scale(.4); animation:none; }

    .controls{
      display:flex; gap:10px; flex-wrap:wrap;
      justify-content:flex-end; align-items:center;
    }
    button{
      border:4px solid var(--outline);
      background: #fff;
      border-radius: 14px;
      padding:10px 12px;
      font-weight:900;
      cursor:pointer;
      box-shadow: 0 10px 0 rgba(0,0,0,.10);
      transition: transform .06s ease;
      user-select:none;
    }
    button:active{ transform: translateY(4px); box-shadow:0 6px 0 rgba(0,0,0,.10); }
    .btnPink{ background: linear-gradient(90deg, var(--pink), #ffd0ef); }
    .btnYellow{ background: linear-gradient(90deg, var(--yellow), #fff6b0); }
    .btnMint{ background: linear-gradient(90deg, var(--mint), #d8fff2); }
    .btnSteel{ background: linear-gradient(90deg, var(--steel), #ffffff); }

    .note{ margin:10px 0 0; font-size:13px; opacity:.88; }
    .kbd{
      display:inline-block; padding:2px 8px;
      border:3px solid var(--outline);
      border-radius:10px;
      background:#fff;
      box-shadow: 0 6px 0 rgba(0,0,0,.08);
      font-size:12px;
    }

    /* Right panel: ME toys */
    .balloons{
      position:relative;
      height:190px;
      border:4px solid rgba(36,27,74,.18);
      border-radius:18px;
      background:
        radial-gradient(circle at 30% 25%, rgba(255,62,165,.14), transparent 55%),
        radial-gradient(circle at 70% 60%, rgba(255,226,74,.22), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.55), rgba(255,255,255,.15));
      overflow:hidden;
    }
    .balloon{
      position:absolute; bottom:-90px;
      width:56px; height:74px;
      border:4px solid var(--outline);
      border-radius: 50% 50% 48% 48%;
      box-shadow: 0 12px 0 rgba(0,0,0,.08);
      animation: floatUp 6.5s ease-in-out infinite;
    }
    .balloon::after{
      content:"";
      position:absolute; left:50%; top:72px;
      width:10px; height:10px;
      border:4px solid var(--outline);
      border-top:none; border-left:none;
      transform: translateX(-50%) rotate(45deg);
      background: inherit;
      border-radius: 2px;
    }
    .string{
      position:absolute; left:50%; top:88px;
      width:2px; height:110px;
      background: rgba(36,27,74,.55);
      transform: translateX(-50%);
    }
    @keyframes floatUp{
      0%{ transform: translateY(0) translateX(0) rotate(-2deg); }
      50%{ transform: translateY(-190px) translateX(10px) rotate(2deg); }
      100%{ transform: translateY(0) translateX(0) rotate(-2deg); }
    }

    /* Mechanical block */
    .meBlock{
      margin-top:12px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width:900px){ .meBlock{ grid-template-columns:1fr; } }

    .meCard{
      border:4px solid var(--outline);
      border-radius:18px;
      background: linear-gradient(180deg, rgba(255,255,255,.70), rgba(255,255,255,.20));
      box-shadow: 0 14px 0 rgba(0,0,0,.10);
      padding:12px;
      position:relative;
      overflow:hidden;
    }
    .meHead{ font-weight:900; margin:0 0 8px; display:flex; align-items:center; gap:8px; }

    /* Gauge */
    .gauge{
      width:100%;
      height:120px;
      display:grid;
      place-items:center;
      position:relative;
    }
    .dial{
      width:120px; height:120px;
      border:4px solid var(--outline);
      border-radius:50%;
      background: radial-gradient(circle at 30% 25%, rgba(255,255,255,.9), rgba(207,216,230,.45));
      box-shadow: inset 0 -10px 0 rgba(0,0,0,.06);
      position:relative;
    }
    .dial::after{
      content:"kPa";
      position:absolute;
      bottom:18px; left:50%;
      transform: translateX(-50%);
      font-weight:900;
      font-size:12px;
      padding:2px 8px;
      border:3px solid var(--outline);
      border-radius:10px;
      background:#fff;
      box-shadow: 0 6px 0 rgba(0,0,0,.08);
    }
    .needle{
      width:4px; height:46px;
      background: var(--outline);
      position:absolute;
      left:50%; top:50%;
      transform-origin: bottom center;
      transform: translateX(-50%) translateY(-90%) rotate(-60deg);
      border-radius:10px;
    }
    .hub{
      width:16px; height:16px;
      border:4px solid var(--outline);
      border-radius:50%;
      background: var(--pink);
      position:absolute;
      left:50%; top:50%;
      transform: translate(-50%,-50%);
    }
    .ticks{
      position:absolute; inset:10px;
      border-radius:50%;
      background:
        conic-gradient(from -120deg,
          rgba(36,27,74,.25) 0 3deg, transparent 3deg 12deg);
      mask: radial-gradient(circle, transparent 0 60%, #000 61% 100%);
      opacity:.55;
    }

    /* Slider-crank (piston) */
    .crank{
      height:120px;
      position:relative;
      border-radius:14px;
      border:4px dashed rgba(36,27,74,.35);
      overflow:hidden;
      background:
        linear-gradient(180deg, rgba(255,255,255,.6), rgba(255,255,255,.2));
    }
    .rail{
      position:absolute; left:10px; right:10px; top:56px; height:8px;
      border:4px solid var(--outline);
      border-left:none; border-right:none;
      background: rgba(36,27,74,.05);
      border-radius:10px;
    }
    .flywheel{
      position:absolute; left:14px; top:18px;
      width:84px; height:84px;
      border:4px solid var(--outline);
      border-radius:50%;
      background: radial-gradient(circle at 30% 25%, #fff, rgba(207,216,230,.55));
      box-shadow: inset 0 -10px 0 rgba(0,0,0,.06);
    }
    .flywheel::before{
      content:"";
      position:absolute; inset:14px;
      border:4px dashed rgba(36,27,74,.35);
      border-radius:50%;
    }
    .crankPin{
      position:absolute;
      width:14px; height:14px;
      border:4px solid var(--outline);
      border-radius:50%;
      background: var(--yellow);
      left:50%; top:50%;
      transform: translate(-50%,-50%);
    }
    .rod{
      position:absolute;
      height:8px;
      border:4px solid var(--outline);
      background: linear-gradient(90deg, rgba(207,216,230,.75), rgba(255,255,255,.7));
      border-radius:12px;
      transform-origin: left center;
    }
    .piston{
      position:absolute;
      width:64px; height:40px;
      border:4px solid var(--outline);
      border-radius:14px;
      background: linear-gradient(180deg, #fff, rgba(207,216,230,.55));
      box-shadow: inset 0 -8px 0 rgba(0,0,0,.06);
      top:40px;
    }
    .piston::after{
      content:"";
      position:absolute;
      left:10px; right:10px; top:12px;
      height:10px;
      border-top:4px solid rgba(36,27,74,.28);
      border-bottom:4px solid rgba(36,27,74,.12);
      border-radius:10px;
    }

    /* footer */
    .footer{
      padding:12px 16px;
      border-top:4px solid var(--outline);
      background: linear-gradient(90deg, rgba(255,226,74,.8), rgba(255,62,165,.55));
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      font-weight:900;
      position:relative;
      z-index:2;
    }
  </style>
</head>
<body>
  <canvas id="fx"></canvas>

  <div class="floaty" aria-hidden="true">
    <div class="blob b1" style="--r:10deg"></div>
    <div class="blob b2" style="--r:-8deg"></div>
    <div class="blob b3" style="--r:14deg"></div>
  </div>

  <div class="wrap">
    <div class="card">

      <!-- corner gears -->
      <svg class="gearCorner left" viewBox="0 0 100 100" aria-hidden="true">
        <g id="g1" class="spin" fill="none" stroke="none">
          <path fill="url(#steelGrad)" d="M50 10l6 4 8-2 5 6 8 1 2 8 7 4-2 8 4 7-6 5 1 8-8 2-4 7-8-2-6 4-6-4-8 2-5-6-8-1-2-8-7-4 2-8-4-7 6-5-1-8 8-2 4-7 8 2z"/>
          <circle cx="50" cy="50" r="22" fill="rgba(255,255,255,.65)" stroke="var(--outline)" stroke-width="4"/>
          <circle cx="50" cy="50" r="6" fill="var(--pink)" stroke="var(--outline)" stroke-width="4"/>
        </g>
        <defs>
          <linearGradient id="steelGrad" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#ffffff"/>
            <stop offset="0.55" stop-color="#cfd8e6"/>
            <stop offset="1" stop-color="#a9b6cc"/>
          </linearGradient>
        </defs>
      </svg>

      <svg class="gearCorner right" viewBox="0 0 100 100" aria-hidden="true">
        <g class="spin" fill="none" stroke="none">
          <path fill="url(#steelGrad2)" d="M50 12l5 3 8-1 5 5 8 1 2 8 7 4-2 8 4 7-6 5 1 8-8 2-4 7-8-2-5 3-5-3-8 2-5-5-8-1-2-8-7-4 2-8-4-7 6-5-1-8 8-2 4-7 8 1z"/>
          <circle cx="50" cy="50" r="18" fill="rgba(255,255,255,.55)" stroke="var(--outline)" stroke-width="4"/>
          <circle cx="50" cy="50" r="6" fill="var(--yellow)" stroke="var(--outline)" stroke-width="4"/>
        </g>
        <defs>
          <linearGradient id="steelGrad2" x1="1" y1="0" x2="0" y2="1">
            <stop offset="0" stop-color="#ffffff"/>
            <stop offset="0.55" stop-color="#cfd8e6"/>
            <stop offset="1" stop-color="#a9b6cc"/>
          </linearGradient>
        </defs>
      </svg>

      <div class="topbar">
        <div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
        <h1 class="title">RETRO BIRTHDAY APP ‚Äî Kak Ula √ó Mechanical Engineering ‚öôÔ∏è</h1>
      </div>

      <div class="content">
        <!-- LEFT -->
        <div class="panel">
          <div class="hero">
            <div>
              <p class="big">Yaumul Milad<br/>Kak Ula üíõüíó</p>
              <p class="sub">
                Semoga sehat selalu, dimudahkan urusannya, dan harinya penuh berkah.
                <span class="banner">‚öôÔ∏è ME MODE: ON ‚öôÔ∏è</span>
              </p>
              <p class="note">
                Tip: <span class="kbd">Space</span> confetti ‚Ä¢ <span class="kbd">B</span> tiup lilin ‚Ä¢ <span class="kbd">T</span> turbo gear
              </p>
            </div>

            <div class="char" title="Engineer mascot">
              <div class="body">
                <div class="ear left"></div>
                <div class="ear right"></div>

                <div class="helmet"></div>
                <div class="goggles" aria-hidden="true">
                  <div class="lens"></div>
                  <div class="bridge"></div>
                  <div class="lens"></div>
                </div>

                <div class="face">
                  <div class="eyes">
                    <span class="eye"></span>
                    <span class="eye"></span>
                  </div>
                  <div class="mouth"></div>
                </div>
                <div class="cheek left"></div>
                <div class="cheek right"></div>
              </div>
              <div class="nameTag">UlaGear ‚òÖ</div>
            </div>
          </div>

          <div class="cakeWrap">
            <div class="cake" id="cake">
              <div class="icing"></div>
              <div class="drip"></div><div class="drip"></div><div class="drip"></div><div class="drip"></div>
              <div class="candles" id="candles">
                <div class="candle"><div class="flame"></div></div>
                <div class="candle"><div class="flame"></div></div>
                <div class="candle"><div class="flame"></div></div>
              </div>
            </div>

            <div class="controls">
              <button class="btnPink" id="btnConfetti">üéâ Confetti!</button>
              <button class="btnYellow" id="btnBlow">üí® Tiup lilin</button>
              <button class="btnMint" id="btnWish">üíå Doa acak</button>
              <button class="btnSteel" id="btnTurbo">‚öôÔ∏è Turbo Gear</button>
            </div>
          </div>

          <p class="note" id="wishText" style="margin-top:12px;font-weight:900;">
            Doa: ‚ÄúSemoga Kak Ula selalu bahagia dan dikelilingi orang-orang baik.‚Äù üå∑
          </p>
        </div>

        <!-- RIGHT -->
        <div class="panel">
          <div class="balloons" id="balloons" aria-label="Balon retro">
            <!-- balloons injected -->
          </div>

          <div style="margin-top:12px">
            <p style="margin:0;font-weight:900;font-size:16px;">Mini Game Retro üéÆ</p>
            <p class="note" style="margin-top:6px">Klik balon untuk ‚ÄúPOP!‚Äù ‚Äî skor tinggi = confetti makin heboh ‚ú®</p>
            <p class="note" style="font-weight:900; margin-top:8px">Skor Pop: <span id="score">0</span></p>
          </div>

          <div class="meBlock">
            <div class="meCard">
              <p class="meHead">üß≠ Pressure Gauge</p>
              <div class="gauge">
                <div class="dial">
                  <div class="ticks"></div>
                  <div class="needle" id="needle"></div>
                  <div class="hub"></div>
                </div>
              </div>
              <p class="note" style="margin:6px 0 0;font-weight:900;">
                Pressure: <span id="pressureVal">0</span> kPa
              </p>
              <p class="note">Naik kalau kamu pencet Turbo / confetti üéâ</p>
            </div>

            <div class="meCard">
              <p class="meHead">‚öôÔ∏è Slider-Crank (Piston)</p>
              <div class="crank" id="crank">
                <div class="rail"></div>
                <div class="flywheel" id="flywheel">
                  <div class="crankPin" id="pin"></div>
                </div>
                <div class="rod" id="rod"></div>
                <div class="piston" id="piston"></div>
              </div>
              <p class="note" style="margin:6px 0 0;">
                Ini simulasi sederhana mekanisme mesin: flywheel ‚Üí connecting rod ‚Üí piston.
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        <span>Made with üíõüíó + retro gears</span>
        <span>Shortcut: <span class="kbd">Space</span> confetti ‚Ä¢ <span class="kbd">B</span> blow ‚Ä¢ <span class="kbd">T</span> turbo</span>
      </div>
    </div>
  </div>

  <script>
    // ====== BALLOONS ======
    const balloonsEl = document.getElementById('balloons');
    const scoreEl = document.getElementById('score');
    let score = 0;

    const colors = [
      'linear-gradient(180deg, #ff3ea5, #ffd0ef)',
      'linear-gradient(180deg, #ffe24a, #fff7b8)',
      'linear-gradient(180deg, #4dffcc, #d8fff2)',
      'linear-gradient(180deg, #4aa3ff, #cfe6ff)'
    ];

    function spawnBalloons(){
      balloonsEl.innerHTML = "";
      const count = 8;
      for(let i=0;i<count;i++){
        const b = document.createElement('div');
        b.className = 'balloon';
        b.style.left = (6 + i*11) + '%';
        b.style.animationDelay = (Math.random()*2.2) + 's';
        b.style.animationDuration = (5.5 + Math.random()*2.8) + 's';
        b.style.background = colors[i % colors.length];

        const s = document.createElement('div');
        s.className = 'string';
        b.appendChild(s);

        b.addEventListener('click', (e)=>{
          e.stopPropagation();
          popAt(e.clientX, e.clientY, 26);
          b.style.transition = 'transform .12s ease, opacity .12s ease';
          b.style.transform = 'scale(0.2) rotate(18deg)';
          b.style.opacity = '0';
          score++;
          scoreEl.textContent = score;
          burstConfetti(score % 3 === 0 ? 140 : 70);
          addPressure(12);
          setTimeout(()=>{ b.remove(); }, 160);
        });

        balloonsEl.appendChild(b);
      }
    }
    spawnBalloons();
    setInterval(spawnBalloons, 9000);

    // ====== CANDLES ======
    const flames = [...document.querySelectorAll('.flame')];
    function setFlames(on){ flames.forEach(f => f.classList.toggle('off', !on)); }
    function anyFlameOn(){ return flames.some(f => !f.classList.contains('off')); }
    function blowCandles(){
      setFlames(false);
      burstConfetti(170);
      popAt(window.innerWidth*0.5, window.innerHeight*0.55, 48);
      addPressure(18);
      setTimeout(()=> setFlames(true), 2600);
    }
    document.getElementById('btnBlow').addEventListener('click', blowCandles);

    // ====== WISHES ======
    const wishes = [
      "Semoga Kak Ula selalu sehat, tenang, dan dimudahkan rezekinya. ü§ç",
      "Semoga setiap langkah Kak Ula penuh berkah dan bahagia. ‚ú®",
      "Semoga Kak Ula makin sukses, makin kuat, dan makin bersinar. üåü",
      "Semoga Kak Ula dikelilingi orang-orang baik dan hati yang lapang. üå∑",
      "Semoga Kak Ula dapat yang terbaik, di dunia dan akhirat. ü§≤",
      "Semoga hari ini jadi start untuk banyak hal indah yang datang. üíõüíó"
    ];
    const wishText = document.getElementById('wishText');
    document.getElementById('btnWish').addEventListener('click', ()=>{
      const w = wishes[Math.floor(Math.random()*wishes.length)];
      wishText.textContent = "Doa: ‚Äú" + w + "‚Äù";
      burstConfetti(90);
      addPressure(8);
    });

    // ====== CONFETTI FX ======
    const canvas = document.getElementById('fx');
    const ctx = canvas.getContext('2d');
    let W, H;
    function resize(){
      W = canvas.width = window.innerWidth * devicePixelRatio;
      H = canvas.height = window.innerHeight * devicePixelRatio;
    }
    window.addEventListener('resize', resize);
    resize();

    const confetti = [];
    function rand(min,max){ return Math.random()*(max-min)+min; }

    function burstConfetti(n=100){
      for(let i=0;i<n;i++){
        confetti.push({
          x: (window.innerWidth/2) * devicePixelRatio + rand(-160,160)*devicePixelRatio,
          y: (window.innerHeight/2) * devicePixelRatio + rand(-120,80)*devicePixelRatio,
          vx: rand(-4.2,4.2)*devicePixelRatio,
          vy: rand(-7.5,-2.2)*devicePixelRatio,
          g: rand(0.12,0.22)*devicePixelRatio,
          r: rand(3,8)*devicePixelRatio,
          a: rand(0,Math.PI*2),
          va: rand(-0.18,0.18),
          life: rand(55,110),
          col: [ '#ff3ea5', '#ffe24a', '#4dffcc', '#4aa3ff', '#241b4a', '#ffffff' ][Math.floor(rand(0,6))]
        });
      }
    }
    function popAt(cx, cy, n=20){
      for(let i=0;i<n;i++){
        confetti.push({
          x: cx*devicePixelRatio,
          y: cy*devicePixelRatio,
          vx: rand(-5,5)*devicePixelRatio,
          vy: rand(-6,-1)*devicePixelRatio,
          g: rand(0.10,0.20)*devicePixelRatio,
          r: rand(2.5,7)*devicePixelRatio,
          a: rand(0,Math.PI*2),
          va: rand(-0.22,0.22),
          life: rand(35,80),
          col: [ '#ff3ea5', '#ffe24a', '#4dffcc', '#4aa3ff', '#241b4a' ][Math.floor(rand(0,5))]
        });
      }
    }
    function tick(){
      ctx.clearRect(0,0,W,H);
      for(let i=confetti.length-1;i>=0;i--){
        const p = confetti[i];
        p.vy += p.g;
        p.x += p.vx;
        p.y += p.vy;
        p.a += p.va;
        p.life -= 1;

        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.a);
        ctx.fillStyle = p.col;
        ctx.fillRect(-p.r, -p.r/2, p.r*2, p.r);
        ctx.restore();

        if(p.life <= 0 || p.y > H + 50*devicePixelRatio) confetti.splice(i,1);
      }
      requestAnimationFrame(tick);
    }
    tick();

    // ====== ME: Gauge + Turbo + Piston ======
    const needle = document.getElementById('needle');
    const pressureVal = document.getElementById('pressureVal');
    const flywheel = document.getElementById('flywheel');
    const pin = document.getElementById('pin');
    const rod = document.getElementById('rod');
    const piston = document.getElementById('piston');

    let pressure = 18;          // kPa (display only)
    let turbo = false;
    let omega = 0.045;          // angular step per frame
    let angle = 0;

    function clamp(v, a, b){ return Math.max(a, Math.min(b, v)); }

    function setGauge(p){
      // map pressure 0..120 kPa => needle angle -60..+60 deg
      const pp = clamp(p, 0, 120);
      const deg = -60 + (pp/120)*120;
      needle.style.transform = `translateX(-50%) translateY(-90%) rotate(${deg}deg)`;
      pressureVal.textContent = Math.round(pp);
    }
    function addPressure(x){
      pressure = clamp(pressure + x, 0, 120);
      setGauge(pressure);
      // decay later
      clearTimeout(addPressure._t);
      addPressure._t = setTimeout(()=>{ pressure = clamp(pressure - 10, 0, 120); setGauge(pressure); }, 800);
    }
    setGauge(pressure);

    function setTurbo(on){
      turbo = on;
      // speed up gear animation visually by toggling class
      document.querySelectorAll('.gearCorner g').forEach(g=>{
        g.classList.toggle('spinFast', turbo);
        g.classList.toggle('spin', !turbo);
      });
      omega = turbo ? 0.12 : 0.045;
      if(turbo){
        burstConfetti(120);
        addPressure(24);
      }
    }

    document.getElementById('btnTurbo').addEventListener('click', ()=>{
      setTurbo(!turbo);
    });

    // slider-crank animation
    function mechTick(){
      angle += omega;
      const R = 26;          // crank radius
      const L = 86;          // rod length
      const cx = 14 + 42;    // flywheel center x (flywheel left + radius)
      const cy = 18 + 42;    // flywheel center y
      // crank pin position
      const px = cx + R*Math.cos(angle);
      const py = cy + R*Math.sin(angle);
      pin.style.left = px + "px";
      pin.style.top  = py + "px";

      // slider line y ~ 60px (rail center). Keep piston sliding horizontally.
      const sliderY = 60;
      // compute slider x using geometry: (sx - px)^2 + (sliderY - py)^2 = L^2
      const dy = sliderY - py;
      const inside = Math.max(0, L*L - dy*dy);
      const sx = px + Math.sqrt(inside); // choose the right-side solution

      // piston position
      const pistonX = clamp(sx, 120, 250);
      piston.style.left = pistonX + "px";

      // connecting rod from pin to piston center
      const pistonCenterX = pistonX + 32;
      const pistonCenterY = sliderY;
      const dx = pistonCenterX - px;
      const len = Math.sqrt(dx*dx + dy*dy);

      rod.style.left = px + "px";
      rod.style.top  = (py - 4) + "px";
      rod.style.width = len + "px";
      const rodAngle = Math.atan2(dy, dx) * (180/Math.PI);
      rod.style.transform = `rotate(${rodAngle}deg)`;

      // flywheel rotation
      flywheel.style.transform = `rotate(${angle*180/Math.PI}deg)`;

      requestAnimationFrame(mechTick);
    }
    mechTick();

    // ====== interactions ======
    document.getElementById('btnConfetti').addEventListener('click', ()=>{ burstConfetti(150); addPressure(10); });

    document.addEventListener('click', (e)=>{
      if(e.target.tagName.toLowerCase() === 'button') return;
      popAt(e.clientX, e.clientY, 12);
    });

    document.addEventListener('keydown', (e)=>{
      if(e.code === 'Space'){ e.preventDefault(); burstConfetti(120); addPressure(10); }
      if(e.key.toLowerCase() === 'b'){ blowCandles(); }
      if(e.key.toLowerCase() === 't'){ setTurbo(!turbo); }
    });

    // start party
    burstConfetti(160);
    setTimeout(()=>{ if(anyFlameOn()) blowCandles(); }, 1100);
  </script>
</body>
</html>
